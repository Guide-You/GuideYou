<?xml version="1.0" encoding="UTF-8"?>
<!-- 24.02.29 관리자 페이지 xml -->
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.guideyou.repository.interfaces.admin.AdminRepository">

	<select id="findLatestPosts" resultType="com.guideyou.dto.product.ProductDto">
		SELECT u.nickname as nickName, p.id, p.user_id as userId, p.title, p.price, p.created_at as createdAt
        FROM product p
        JOIN user u ON p.user_id = u.id
        ORDER BY p.created_at DESC
	</select>

	<select id="findProductInfo" resultType="com.guideyou.dto.product.ProductDto">
		SELECT p.id AS productId,
	       p.intro_content,
	       p.content,
	       p.price,
	       p.sold_count,
	       p.created_at,
	       ph.upload_file_name AS uploadFileName,
	       (p.price * p.sold_count) AS revenue
		FROM product p
		JOIN product_photos ph ON p.id = ph.product_id
		ORDER BY p.id
	</select>


</mapper>